{% extends "layout/base.html" %}

{% block content %}
<div class="container mx-auto max-w-4xl p-4">
  <div class="flex justify-between items-center mb-6">
    <h1 class="text-2xl font-bold">Reading Practice</h1>
    {% if profile %}
    <div class="text-sm text-gray-600">
      Language: {{ profile.lang }} â†’ {{ profile.target_lang }}
    </div>
    {% endif %}
  </div>

  {% if is_demo %}
  <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6">
    <p class="text-yellow-800">
      <span class="font-semibold">Demo Mode:</span>
      Text generation is not yet available. This is a placeholder text.
    </p>
  </div>
  {% endif %}

  <div class="bg-white rounded-lg shadow-md p-8">
    <div id="reading-content" data-text-id="{{ text_id }}">
      <p class="text-lg leading-relaxed whitespace-pre-wrap">{{ text_content }}</p>
    </div>

    <div class="mt-8 pt-6 border-t flex justify-between items-center">
      <button id="toggle-translation" class="px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50">
        Show Translation
      </button>
      <button id="next-text-btn" class="px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg">
        Next Text
      </button>
    </div>
  </div>

  <div id="translation-panel" class="hidden mt-6 bg-white rounded-lg shadow-md p-6">
    <h2 class="text-lg font-bold mb-4">Translation</h2>
    <p id="translation-text" class="text-gray-700">
      {% if is_demo %}
      Hello! Welcome to your reading practice.
      This is a simple demo text to get you started.
      The full text generation system will be available soon.
      {% else %}
      Translation not yet available.
      {% endif %}
    </p>
  </div>
</div>

<script>
document.getElementById('toggle-translation').addEventListener('click', function() {
  const panel = document.getElementById('translation-panel');
  const btn = this;
  if (panel.classList.contains('hidden')) {
    panel.classList.remove('hidden');
    btn.textContent = 'Hide Translation';
  } else {
    panel.classList.add('hidden');
    btn.textContent = 'Show Translation';
  }
});

document.getElementById('next-text-btn').addEventListener('click', function() {
  window.location.reload();
});
</script>
{% endblock %}
