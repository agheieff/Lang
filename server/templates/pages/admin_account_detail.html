{% extends "layout/base.html" %}

{% block content %}
<div class="container mx-auto max-w-4xl p-4">
  <a href="/admin/accounts" class="text-blue-600 hover:underline mb-4 inline-block">&larr; Back to accounts</a>
  
  <div class="bg-white rounded-lg shadow p-6 mb-6">
    <h1 class="text-2xl font-bold mb-4">Account #{{ target.id }}</h1>
    
    <div class="grid grid-cols-2 gap-4">
      <div>
        <p class="text-sm text-gray-500">Email</p>
        <p class="font-medium">{{ target.email }}</p>
      </div>
      <div>
        <p class="text-sm text-gray-500">Tier</p>
        <p class="font-medium">
          {% if target.subscription_tier == 'admin' %}
            <span class="px-2 py-0.5 bg-purple-100 text-purple-800 rounded text-xs">{{ target.subscription_tier }}</span>
          {% elif target.subscription_tier == 'system' %}
            <span class="px-2 py-0.5 bg-gray-200 text-gray-800 rounded text-xs">{{ target.subscription_tier }}</span>
          {% else %}
            {{ target.subscription_tier or 'Free' }}
          {% endif %}
        </p>
      </div>
      <div>
        <p class="text-sm text-gray-500">Active</p>
        <p class="font-medium">
          {% if target.is_active %}
            <span class="text-green-600">Yes</span>
          {% else %}
            <span class="text-red-600">No</span>
          {% endif %}
        </p>
      </div>
      <div>
        <p class="text-sm text-gray-500">Created</p>
        <p class="font-medium">{{ target.created_at.strftime('%Y-%m-%d %H:%M') if target.created_at else '-' }}</p>
      </div>
    </div>
  </div>
  
  <div class="bg-white rounded-lg shadow p-6">
    <h2 class="text-xl font-bold mb-4">Profiles ({{ profiles|length }})</h2>
    
    {% if profiles %}
    <div class="space-y-3">
      {% for p in profiles %}
      <div class="border rounded p-3">
        <div class="flex justify-between items-center">
          <div>
            <span class="px-2 py-0.5 bg-blue-100 text-blue-800 rounded text-sm font-medium">
              {{ p.lang }} â†’ {{ p.target_lang }}
            </span>
          </div>
          <div class="text-sm text-gray-600">
            Level: {{ "%.1f"|format(p.level_value) }}
          </div>
        </div>
        {% if p.text_preferences %}
        <p class="text-sm text-gray-500 mt-2">{{ p.text_preferences[:100] }}{% if p.text_preferences|length > 100 %}...{% endif %}</p>
        {% endif %}
      </div>
      {% endfor %}
    </div>
    {% else %}
    <p class="text-gray-500 italic">No profiles</p>
    {% endif %}
  </div>
</div>
{% endblock %}
